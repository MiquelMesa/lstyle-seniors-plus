<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="LSTYLE-SENIORS-PLUS - Estil de Vida Saludable per a Seniors Universitaris Plus">
    <title>LIFE STYLE SENIORS PLUS</title>
    <link rel="icon" type="image/png" href="img/general/envejecer-saludablemente.png">

    <!-- Fonts Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;600;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">

    <!-- Estils -->
    <link rel="stylesheet" href="css/estils.css">
    <link rel="stylesheet" href="css/pantalles.css">
    <link rel="stylesheet" href="css/formulari.css">

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

    <!-- ============================================
         BOT√ì PANTALLA COMPLETA
         ============================================ -->
    <button id="btn-pantalla-completa" class="btn-pantalla-completa" title="Pantalla completa">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
        </svg>
    </button>

    <!-- ============================================
         PANTALLA 1: INICI (c√†rrega de l'app)
         Visible mentre l'app s'inicialitza
         ============================================ -->
    <div id="pantalla-inici" class="pantalla-inici">
        <div class="inici-contingut">
            <div class="inici-titol">LIFE STYLE SENIORS PLUS</div>
            <div class="inici-spinner">
                <div class="spinner-ring"></div>
            </div>
        </div>
    </div>

    <!-- ============================================
         PANTALLA 2: DISCLAIMER
         Mostrada un cop l'app ha carregat
         ============================================ -->
    <div id="pantalla-disclaimer" class="pantalla-disclaimer ocult">

        <!-- BLOC PRINCIPAL: Imatge esquerra + contingut dret -->
        <div class="disclaimer-principal">

            <!-- ESQUERRA: Il¬∑lustraci√≥ -->
            <div class="disclaimer-esquerra">
                <img
                    src="img/general/envejecer-saludablemente.png"
                    alt="Life Style Seniors Plus"
                    class="disclaimer-imatge"
                    onerror="this.style.opacity='0'"
                >
            </div>

            <!-- DRETA: T√≠tol + info + acceptaci√≥ -->
            <div class="disclaimer-dreta">

                <!-- T√≠tol i subt√≠tol -->
                <div class="disclaimer-titols">
                    <h1 class="disclaimer-titol">LIFE STYLE SENIORS PLUS</h1>
                    <p class="disclaimer-subtitol">Estil de Vida Saludable per a Seniors Universitaris Plus</p>
                </div>

                <!-- Acceptaci√≥ + Bot√≥ -->
                <div class="disclaimer-acceptacio">
                    <label class="disclaimer-checkbox-label">
                        <input type="checkbox" id="checkbox-acceptacio" class="disclaimer-checkbox">
                        <span class="disclaimer-checkbox-text">
                            Aquesta aplicaci√≥ √©s informativa. Les meves dades
                            s√≥n privades. Davant qualsevol dubte consultar√© amb el meu metge.
                        </span>
                    </label>
                    <button id="btn-continuar-disclaimer" class="btn btn-vermell" disabled>
                        Continuar
                    </button>
                </div>

            </div>
        </div>

        <!-- BLOC MIG: 4 Targetes informatives -->
        <div class="disclaimer-targetes">
            <div class="disclaimer-targeta">
                <h3>üìã Car√†cter Informatiu</h3>
                <p>Aquesta aplicaci√≥ t√© un car√†cter merament informatiu i educatiu. Les dades, c√†lculs i consells NO substitueixen el consell professional del vostre metge.</p>
            </div>
            <div class="disclaimer-targeta">
                <h3>üîí Privacitat de Dades</h3>
                <p>Totes les vostres dades personals i de salut s√≥n completament privades i NO es comparteixen amb ning√∫. Es guarden de forma segura i xifrada al vostre navegador local.</p>
            </div>
            <div class="disclaimer-targeta">
                <h3>‚öïÔ∏è Consulta M√®dica</h3>
                <p>Davant de qualsevol dubte sobre la vostra salut, condici√≥ m√®dica, medicaci√≥ o tractament, consulteu sempre amb el vostre metge de cap√ßalera o especialista.</p>
            </div>
            <div class="disclaimer-targeta">
                <h3>üéØ Objectiu</h3>
                <p>Dissenyada per a Seniors Universitaris Plus: persones actives, educades i modernes que volen mantenir un estil de vida saludable amb informaci√≥ fiable.</p>
            </div>
        </div>

        <!-- BLOC INFERIOR: Fonts oficials -->
        <div class="disclaimer-fonts">
            <div class="disclaimer-fonts-titol">üóÇÔ∏è Fonts Oficials Utilitzades</div>
            <div class="disclaimer-fonts-text">
                BEDCA - Base de Dades Espanyola de Composici√≥ d'Aliments - www.bedca.net/bdpub/ &nbsp;|&nbsp;
                Generalitat de Catalunya - Salut P√∫blica - salutpublica.gencat.cat &nbsp;|&nbsp;
                Ministeri d'Agricultura - Alimentaci√≥ - www.alimentacion.es &nbsp;|&nbsp;
                Societat Espanyola del Son - ses.org.es &nbsp;|&nbsp;
                Societat Espanyola de Geriatria i Gerontologia (SEGG)
            </div>
        </div>

    </div>

    <!-- ============================================
         PANTALLA 3: C√ÄRREGA DE DADES
         Mostrada mentre carrega Supabase
         ============================================ -->
    <div id="pantalla-carrega-dades" class="pantalla-carrega-dades ocult">
        <div class="carrega-contingut">
            <div class="carrega-logo-petit">L</div>
            <div class="carrega-titol">LIFE STYLE SENIORS PLUS</div>
            <img
                src="img/general/loadind-data.png"
                alt="Carregant dades"
                class="carrega-imatge"
                onerror="this.style.opacity='0'"
            >
            <div class="carrega-text">Carregant les dades...</div>
        </div>
    </div>

    <!-- ============================================
         PANTALLA 4: ENTRADA DE DADES
         ============================================ -->
    <div id="pantalla-entrada-dades" class="pantalla-entrada ocult">

        <!-- Cap√ßalera -->
        <div class="entrada-capcalera">
            <div class="entrada-capcalera-esquerra">
                <h2>Les teves dades :</h2>
                <p>Omple les dades seg√ºents per obtenir recomanacions personalitzades</p>
            </div>
            <div class="entrada-capcalera-dreta">LIFE STYLE SENIORS PLUS</div>
        </div>

        <hr class="entrada-separador">

        <!-- Formulari -->
        <form id="formulari-dades" class="formulari-dades" novalidate>
            <div class="entrada-grid">

                <!-- ================================
                     FILA 1: Personals | F√≠siques | Pressi√≥
                     ================================ -->

                <!-- (1) DADES PERSONALS -->
                <div class="seccio-targeta col-3" id="targeta-personals">
                    <div class="seccio-titol">
                        <span class="seccio-numero">1</span>
                        Dades Personals:
                    </div>

                    <!-- Nom -->
                    <div class="camp-grup">
                        <label class="camp-etiqueta" for="nom">
                            Nom <span class="obligatori">*</span>
                            <span class="tooltip-icona" data-tooltip="El teu nom. S'utilitza per personalitzar els resultats i recomanacions.">‚ÑπÔ∏è</span>
                        </label>
                        <input
                            type="text"
                            id="nom"
                            name="nom"
                            class="input-formulari"
                            placeholder="El teu nom"
                            maxlength="100"
                            required
                            autocomplete="off"
                        >
                        <div class="camp-error" id="error-nom"></div>
                    </div>

                    <!-- Sexe + Edat en fila -->
                    <div class="camp-fila-2">
                        <div class="camp-grup">
                            <label class="camp-etiqueta" for="sexe">
                                Sexe <span class="obligatori">*</span>
                                <span class="tooltip-icona" data-tooltip="El sexe biol√≤gic √©s necessari per als c√†lculs de TMB (Taxa Metab√≤lica Basal), IMC i ICC, ja que els valors de refer√®ncia varien entre homes i dones.">‚ÑπÔ∏è</span>
                            </label>
                            <select id="sexe" name="sexe" class="select-formulari" required>
                                <option value="">---</option>
                                <option value="M">Masculi</option>
                                <option value="F">Femeni</option>
                            </select>
                            <div class="camp-error" id="error-sexe"></div>
                        </div>
                        <div class="camp-grup">
                            <label class="camp-etiqueta" for="edat">
                                Edat <span class="obligatori">*</span>
                                <span class="tooltip-icona" data-tooltip="L'edat en anys complets. S'utilitza per calcular la Taxa Metab√≤lica Basal i les necessitats nutricionals espec√≠fiques per a seniors.">‚ÑπÔ∏è</span>
                            </label>
                            <input
                                type="number"
                                id="edat"
                                name="edat"
                                class="input-formulari"
                                placeholder="Anys"
                                min="60" max="120"
                                required
                                autocomplete="off"
                            >
                            <div class="camp-error" id="error-edat"></div>
                        </div>
                    </div>
                </div>

                <!-- (2) DADES F√çSIQUES -->
                <div class="seccio-targeta col-5" id="targeta-fisiques">
                    <div class="seccio-titol">
                        <span class="seccio-numero">2</span>
                        Dades F√≠siques:
                    </div>

                    <div class="grid-rangs-2x2">

                        <!-- Al√ßada -->
                        <div class="rang-grup">
                            <div class="camp-etiqueta">
                                Al√ßada <span class="obligatori">*</span>
                                <span class="tooltip-icona" data-tooltip="La teva al√ßada en cent√≠metres. Si no la saps exacta, posa un rang (m√≠nim i m√†xim). S'utilitza per calcular l'IMC (√çndex de Massa Corporal).">‚ÑπÔ∏è</span>
                            </div>
                            <div class="rang-camps">
                                <span class="rang-text">Entre</span>
                                <input type="number" id="alcada-min" name="alcada-min"
                                    class="input-formulari input-rang"
                                    placeholder="000" min="100" max="250" step="0.1" required autocomplete="off">
                                <span class="rang-text">i</span>
                                <input type="number" id="alcada-max" name="alcada-max"
                                    class="input-formulari input-rang"
                                    placeholder="000" min="100" max="250" step="0.1" autocomplete="off">
                                <span class="rang-unitat">cm</span>
                            </div>
                            <div class="camp-error" id="error-alcada"></div>
                        </div>

                        <!-- Per√≠metre Cintura -->
                        <div class="rang-grup">
                            <div class="camp-etiqueta">
                                Per√≠metre Cintura
                                <span class="tooltip-icona" data-tooltip="Mesura el per√≠metre de la cintura just per sobre del melic, a l'expirar. S'utilitza per calcular l'ICC (√çndex Cintura-Cadera) i el risc cardiovascular.">‚ÑπÔ∏è</span>
                            </div>
                            <div class="rang-camps">
                                <span class="rang-text">Entre</span>
                                <input type="number" id="cintura-min" name="cintura-min"
                                    class="input-formulari input-rang"
                                    placeholder="000" min="40" max="200" step="0.1" autocomplete="off">
                                <span class="rang-text">i</span>
                                <input type="number" id="cintura-max" name="cintura-max"
                                    class="input-formulari input-rang"
                                    placeholder="000" min="40" max="200" step="0.1" autocomplete="off">
                                <span class="rang-unitat">cm</span>
                            </div>
                        </div>

                        <!-- Pes -->
                        <div class="rang-grup">
                            <div class="camp-etiqueta">
                                Pes <span class="obligatori">*</span>
                                <span class="tooltip-icona" data-tooltip="El teu pes en quilograms. Si el teu pes varia, posa un rang. S'utilitza per calcular l'IMC, la TMB i les calories di√†ries recomanades.">‚ÑπÔ∏è</span>
                            </div>
                            <div class="rang-camps">
                                <span class="rang-text">Entre</span>
                                <input type="number" id="pes-min" name="pes-min"
                                    class="input-formulari input-rang"
                                    placeholder="000" min="30" max="300" step="0.1" required autocomplete="off">
                                <span class="rang-text">i</span>
                                <input type="number" id="pes-max" name="pes-max"
                                    class="input-formulari input-rang"
                                    placeholder="000" min="30" max="300" step="0.1" autocomplete="off">
                                <span class="rang-unitat">kg</span>
                            </div>
                            <div class="camp-error" id="error-pes"></div>
                        </div>

                        <!-- Per√≠metre Maluc -->
                        <div class="rang-grup">
                            <div class="camp-etiqueta">
                                Per√≠metre Maluc
                                <span class="tooltip-icona" data-tooltip="Mesura el per√≠metre del maluc en el punt m√©s ample (els malucs). Junt amb la cintura permet calcular l'ICC (√çndex Cintura-Cadera) per avaluar el risc cardiovascular.">‚ÑπÔ∏è</span>
                            </div>
                            <div class="rang-camps">
                                <span class="rang-text">Entre</span>
                                <input type="number" id="maluc-min" name="Maluc-min"
                                    class="input-formulari input-rang"
                                    placeholder="000" min="40" max="200" step="0.1" autocomplete="off">
                                <span class="rang-text">i</span>
                                <input type="number" id="maluc-max" name="Maluc-max"
                                    class="input-formulari input-rang"
                                    placeholder="000" min="40" max="200" step="0.1" autocomplete="off">
                                <span class="rang-unitat">cm</span>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- (3) PRESSI√ì ARTERIAL -->
                <div class="seccio-targeta col-4" id="targeta-pressio">
                    <div class="seccio-titol">
                        <span class="seccio-numero">3</span>
                        Pressi√≥ Arterial:
                    </div>

                    <div class="grid-pressio-3">

                        <!-- M√†xima -->
                        <div class="pressio-camp">
                            <div class="camp-etiqueta">
                                M√†xima (Sist√≤lica)
                                <span class="tooltip-icona" data-tooltip="La pressi√≥ sist√≤lica √©s la pressi√≥ m√†xima quan el cor batega. Normal: menys de 120 mmHg. S'utilitza per avaluar el risc cardiovascular.">‚ÑπÔ∏è</span>
                            </div>
                            <div class="pressio-input-fila">
                                <input type="number" id="pressio-max" name="pressio-max"
                                    class="input-formulari" placeholder="000"
                                    min="60" max="250" autocomplete="off">
                                <span class="pressio-unitat">mmHg</span>
                            </div>
                            <div class="pressio-barra" id="barra-pressio-max"></div>
                        </div>

                        <!-- M√≠nima -->
                        <div class="pressio-camp">
                            <div class="camp-etiqueta">
                                M√≠nima (Diast√≤lica)
                                <span class="tooltip-icona" data-tooltip="La pressi√≥ diast√≤lica √©s la pressi√≥ m√≠nima entre batecs del cor. Normal: menys de 80 mmHg. S'utilitza per avaluar el risc cardiovascular.">‚ÑπÔ∏è</span>
                            </div>
                            <div class="pressio-input-fila">
                                <input type="number" id="pressio-min" name="pressio-min"
                                    class="input-formulari" placeholder="000"
                                    min="40" max="150" autocomplete="off">
                                <span class="pressio-unitat">mmHg</span>
                            </div>
                            <div class="pressio-barra" id="barra-pressio-min"></div>
                        </div>

                        <!-- Freq√º√®ncia -->
                        <div class="pressio-camp">
                            <div class="camp-etiqueta">
                                Freq√º√®ncia Card√≠aca
                                <span class="tooltip-icona" data-tooltip="El nombre de batecs del cor per minut en rep√≤s. Normal: entre 60 i 100 ppm. S'utilitza per avaluar la salut cardiovascular general.">‚ÑπÔ∏è</span>
                            </div>
                            <div class="pressio-input-fila">
                                <input type="number" id="frequencia" name="frequencia"
                                    class="input-formulari" placeholder="000"
                                    min="40" max="200" autocomplete="off">
                                <span class="pressio-unitat">ppm</span>
                            </div>
                            <div class="pressio-barra" id="barra-frequencia"></div>
                        </div>

                    </div>
                </div>

                <!-- ================================
                     FILA 2: Condicions | Activitat
                     ================================ -->

                <!-- (4) CONDICIONS DE SALUT -->
                <div class="seccio-targeta col-6" id="targeta-condicions">
                    <div class="seccio-titol">
                        <span class="seccio-numero">4</span>
                        Condicions de Salut:
                        <span class="tooltip-icona" data-tooltip="Selecciona les condicions de salut que tens diagnosticades. S'utilitzaran per personalitzar els consells nutricionals i les recomanacions d'activitat f√≠sica.">‚ÑπÔ∏è</span>
                    </div>
                    <div id="contenidor-condicions" class="condicions-grid">
                        <div class="carregant-text">Carregant...</div>
                    </div>
                </div>

                <!-- (5) ACTIVITAT F√çSICA -->
                <div class="seccio-targeta col-6" id="targeta-activitat">
                    <div class="seccio-titol">
                        <span class="seccio-numero">5</span>
                        Activitat F√≠sica: <span class="obligatori">*</span>
                        <span class="tooltip-icona" data-tooltip="El teu nivell habitual d'activitat f√≠sica. S'utilitza per calcular les calories totals que necessites al dia (TDEE = TMB x Factor d'activitat).">‚ÑπÔ∏è</span>
                    </div>
                    <div id="contenidor-activitat" class="activitat-grid">
                        <div class="carregant-text">Carregant...</div>
                    </div>
                    <div class="camp-error" id="error-activitat"></div>
                </div>

                <!-- ================================
                     FILA 3: H√†bits centrat
                     ================================ -->

                <!-- (6) H√ÄBITS DE VIDA -->
                <div class="seccio-targeta col-12-centrat" id="targeta-habits">
                    <div class="seccio-titol">
                        <span class="seccio-numero">6</span>
                        H√†bits de Vida:
                    </div>
                    <div class="habits-fila">

                        <!-- Fumador -->
                        <div class="habit-grup">
                            <span class="habit-etiqueta">
                                Fumador/a?
                                <span class="tooltip-icona" data-tooltip="Si fumes, les teves necessitats de certes vitamines (especialment vitamina C) augmenten. Tamb√© s'adaptaran les recomanacions nutricionals.">‚ÑπÔ∏è</span>
                            </span>
                            <div class="habit-opcions">
                                <label class="habit-opcio">
                                    <input type="radio" name="fumador" value="si"> S√≠
                                </label>
                                <label class="habit-opcio seleccionat">
                                    <input type="radio" name="fumador" value="no" checked> No
                                </label>
                            </div>
                        </div>

                        <!-- Vegetari√† -->
                        <div class="habit-grup">
                            <span class="habit-etiqueta">
                                Vegetari√†/ana?
                                <span class="tooltip-icona" data-tooltip="Si segueixes una dieta vegetariana, les recomanacions nutricionals s'adaptaran per assegurar l'aport adequat de prote√Ønes, ferro, vitamina B12 i omega-3.">‚ÑπÔ∏è</span>
                            </span>
                            <div class="habit-opcions">
                                <label class="habit-opcio">
                                    <input type="radio" name="vegetaria" value="si"> S√≠
                                </label>
                                <label class="habit-opcio seleccionat">
                                    <input type="radio" name="vegetaria" value="no" checked> No
                                </label>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- ================================
                     BOTONS D'ACCI√ì
                     ================================ -->
                <div class="botons-accio">
                    <button type="button" id="btn-netejar" class="btn btn-contorn">
                        üóëÔ∏è Netejar formulari
                    </button>
                    <div class="botons-dreta">
                        <span class="camps-obligatoris-nota">
                            <span class="obligatori">*</span> Camps obligatoris
                        </span>
                        <button type="submit" class="btn btn-primari btn-gran">
                            Calcular i veure resultats ‚Üí
                        </button>
                    </div>
                </div>

            </div>
        </form>
    </div>

    <!-- ============================================
         PANTALLA 5: RESULTATS (Fase 5 - pendent)
         ============================================ -->
    <div id="pantalla-resultats" class="ocult">
        <!-- Es desenvolupar√† a la FASE 5 -->
    </div>

    <!-- ============================================
         TOOLTIP GLOBAL
         ============================================ -->
    <div id="tooltip-global" class="tooltip-global ocult"></div>

    <!-- ============================================
         SCRIPTS
         ============================================ -->
    <script src="config/supabase-config.js"></script>
    <script src="utils/seguretat.js"></script>
    <script src="js/app.js"></script>
    <script src="js/formulari.js"></script>

</body>
</html>